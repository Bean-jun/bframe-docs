{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u4e3b\u9875","text":"<p><code>bframe</code>\u662f\u4e00\u4e2a\u57fa\u4e8e<code>WSGI</code>\u7684\u534f\u8bae\u7684<code>web</code>\u6846\u67b6\u3002\u5b83\u975e\u5e38\u50cf<code>flask</code>\uff0c\u4f46\u4e5f\u4f1a\u6709<code>django restframework</code>\u7684\u5473\u9053\u3002</p> <p><code>bframe</code>\u7684\u521d\u8877\u662f\u4e3a\u4e86\u5b66\u4e60<code>python</code>\u7684<code>web</code>\u6846\u67b6\uff0c\u52a0\u6df1\u5bf9<code>WSGI</code>\u53ca\u5468\u8fb9\u751f\u6001\u7684\u4e86\u89e3\u3002\u5f53\u7136\uff0c\u82e5\u60a8\u60f3\u66f4\u6df1\u5165\u7684\u4e86\u89e3<code>python web</code>\u5f00\u53d1\uff0c\u8bf7\u53c2\u4e0e\u8fdb\u6765\u5427\uff01</p>"},{"location":"#users-guide","title":"User's Guide","text":"<p>bframe\u7684\u4f7f\u7528\u6bd4\u8f83\u7b80\u5355\uff0c\u76f8\u6bd4\u66f4\u4e3a\u590d\u6742\u7684<code>django</code>\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5c1d\u8bd5\u624b\u6495\u672c\u9879\u76ee\u7684\u6e90\u7801\uff0c\u4f46\u5728\u8fd9\u4e4b\u524d\uff0c\u8bf7\u7b80\u5355\u770b\u4e00\u4e0b\u6211\u4eec\u7684\u4f7f\u7528\u6307\u5357</p> <ul> <li> <p>\u5b89\u88c5</p> <ul> <li>Python Version</li> <li>Installation bframe</li> </ul> </li> <li> <p>\u5feb\u901f\u5165\u95e8</p> <ul> <li>bframer</li> <li>shortUrl</li> </ul> </li> <li> <p>\u6559\u7a0b</p> <ul> <li>wsgi\u652f\u6301</li> <li>\u6dfb\u52a0\u94a9\u5b50\u652f\u6301</li> <li>\u652f\u6301\u91cd\u5b9a\u5411</li> <li>\u652f\u6301g\u53d8\u91cf</li> <li>\u89e3\u6790\u8bf7\u6c42\u4f53</li> <li>\u652f\u6301\u8def\u5f84\u53c2\u6570\u5339\u914d</li> <li>\u652f\u6301\u9759\u6001\u6587\u4ef6</li> <li>\u652f\u6301\u89e3\u6790py\u914d\u7f6e\u6587\u4ef6</li> <li>\u652f\u6301\u7c7b\u89c6\u56fe</li> <li>\u652f\u6301\u901a\u7528\u7c7b\u89c6\u56fe&amp;\u9ed8\u8ba4\u8def\u7531</li> <li>\u6846\u67b6\u9ed8\u8ba4\u914d\u7f6e</li> </ul> </li> <li> <p>API</p> <ul> <li>\u7ed3\u6784\u6811</li> </ul> </li> <li> <p>\u7248\u672c</p> <ul> <li>Version 0.0.15</li> <li>Version 0.0.14</li> <li>Version 0.0.13</li> <li>Version 0.0.12</li> <li>Version 0.0.11</li> <li>Version 0.0.10</li> <li>Version 0.0.9</li> <li>Version 0.0.8</li> <li>Version 0.0.7</li> <li>Version 0.0.6</li> <li>Version 0.0.5</li> <li>Version 0.0.4</li> <li>Version 0.0.3</li> <li>Version 0.0.2</li> <li>Version 0.0.1</li> </ul> </li> </ul>"},{"location":"api/","title":"API","text":""},{"location":"api/#_1","title":"\u7ed3\u6784\u6811","text":"<pre><code>.\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 _except.py              # \u5f02\u5e38\n\u251c\u2500\u2500 config.py               # \u6846\u67b6\u914d\u7f6e\n\u251c\u2500\u2500 ctx.py                  # \u6846\u67b6\u4e0a\u4e0b\u6587\n\u251c\u2500\u2500 frame.py                # frame\u6846\u67b6\n\u251c\u2500\u2500 generics.py             # \u901a\u7528\u7c7b\u89c6\u56fe\n\u251c\u2500\u2500 local.py                # \u6846\u67b6\u672c\u5730\u7ebf\u7a0b\u5bf9\u8c61\n\u251c\u2500\u2500 logger.py               # \u6846\u67b6\u901a\u7528\u65e5\u5fd7\u6587\u4ef6\u5e93\n\u251c\u2500\u2500 route.py                # \u6846\u67b6\u8def\u7531\n\u251c\u2500\u2500 scaffold.py             # frame\u6846\u67b6\u9aa8\u67b6\n\u251c\u2500\u2500 serizlizer.py           # \u901a\u7528\u7c7b\u89c6\u56fe\u5e8f\u5217\u5316\u5de5\u5177\u5e93\n\u251c\u2500\u2500 server.py               # \u6846\u67b6\u63d0\u4f9b\u7684\u5185\u7f6eserver\n\u251c\u2500\u2500 sessions.py             # \u6846\u67b6\u63d0\u4f9b\u5bf9session\u7684\u652f\u6301\n\u251c\u2500\u2500 testing.py              # \u6846\u67b6\u63d0\u4f9b\u7684\u5bf9\u5355\u5143\u6d4b\u8bd5\u5de5\u5177\n\u251c\u2500\u2500 utils.py                # \u6846\u67b6\u63d0\u4f9b\u7684\u90e8\u5206\u5de5\u5177\n\u251c\u2500\u2500 view.py                 # \u7c7b\u89c6\u56fe\n\u251c\u2500\u2500 wrappers.py             # \u6846\u67b6\u5bf9\u8bf7\u6c42\u3001\u54cd\u5e94\u7684\u5305\u88c5\u5668\n\u2514\u2500\u2500 wsgi.py                 # \u6846\u67b6\u5bf9wsgi\u7684\u652f\u6301\n</code></pre>"},{"location":"changes/","title":"\u7248\u672c","text":""},{"location":"changes/#version-0015","title":"Version 0.0.15","text":"<p>Released 2023-09-26</p> <ul> <li>\u6dfb\u52a0\u5bf9\u901a\u7528\u7c7b\u89c6\u56fe\u7684\u652f\u6301</li> <li>\u6dfb\u52a0\u9879\u76ee\u6587\u6863</li> </ul>"},{"location":"changes/#version-0014","title":"Version 0.0.14","text":"<p>Released 2023-09-20</p> <ul> <li>\u6dfb\u52a0\u5bf9cookie\u7684\u652f\u6301</li> <li>\u6dfb\u52a0\u5bf9session\u7684\u652f\u6301</li> </ul>"},{"location":"changes/#version-0013","title":"Version 0.0.13","text":"<p>Released 2023-09-06</p> <ul> <li>\u6dfb\u52a0\u5bf9\u7c7b\u89c6\u56fe\u7684\u652f\u6301</li> <li>\u6dfb\u52a0\u90e8\u5206\u6d4b\u8bd5\u7528\u4f8b</li> </ul>"},{"location":"changes/#version-0012","title":"Version 0.0.12","text":"<p>Released 2023-07-13</p> <ul> <li>\u4fee\u590d\u5bf9wsgi\u7684\u5f02\u5e38\u5904\u7406</li> <li>\u652f\u6301\u81ea\u5b9a\u4e49\u72b6\u6001\u7801</li> <li>\u4fee\u590dquery params\u7684\u5f02\u5e38\u5339\u914d</li> <li>\u4e00\u4e9b\u7b80\u5355\u7684\u4fee\u6539</li> </ul>"},{"location":"changes/#version-0011","title":"Version 0.0.11","text":"<p>Released 2023-04-09</p> <ul> <li>\u6dfb\u52a0\u5bf9config\u6587\u4ef6\u7684\u89e3\u6790\uff1b</li> <li>\u6dfb\u52a0current_app\u4e0a\u4e0b\u6587\u7684\u652f\u6301\uff1b</li> </ul>"},{"location":"changes/#version-0010","title":"Version 0.0.10","text":"<p>Released 2023-04-08</p> <ul> <li>\u4fee\u590d\u8bf7\u6c42\u4f53\u4e3a\u7a7a\u7684\u5f02\u5e38\uff1b</li> <li>\u4fee\u590d\u8bf7\u6c42\u4f53\u4e71\u7801\u5f02\u5e38\uff1b</li> <li>\u4fee\u590d\u6dfb\u52a0\u8def\u7531\u5f02\u5e38\uff1b</li> <li>\u6dfb\u52a0\u4e00\u4e2asimple todo app</li> </ul>"},{"location":"changes/#version-009","title":"Version 0.0.9","text":"<p>Released 2023-04-08</p> <ul> <li>\u652f\u6301\u6b63\u5219\u5339\u914d\u8def\u5f84\u53c2\u6570&amp;\u9759\u6001\u6587\u4ef6\uff1b</li> <li>\u6dfb\u52a0\u5bf9\u9759\u6001\u6587\u4ef6\u7684\u8def\u7531\u652f\u6301</li> </ul>"},{"location":"changes/#version-008","title":"Version 0.0.8","text":"<p>Released 2023-04-07</p> <ul> <li>\u652f\u6301\u7b80\u6613\u8def\u5f84\u53c2\u6570\u5339\u914d;</li> <li>\u4fee\u6b63request\u521d\u59cb\u5316\u53c2\u6570\u6570\u636e\u5f02\u5e38\uff1b</li> </ul>"},{"location":"changes/#version-007","title":"Version 0.0.7","text":"<p>Released 2023-04-06</p> <ul> <li>\u4e3a\u6846\u67b6\u652f\u6301Test Client&amp;\u6dfb\u52a0\u6d4b\u8bd5\u7528\u4f8b</li> </ul>"},{"location":"changes/#version-006","title":"Version 0.0.6","text":"<p>Released 2023-04-05</p> <ul> <li>\u63d0\u5347\u89e3\u6790\u8bf7\u6c42\u4f53\u65f6\u7684\u6027\u80fd</li> </ul>"},{"location":"changes/#version-005","title":"Version 0.0.5","text":"<p>Released 2023-04-05</p> <ul> <li>\u89e3\u6790HTTP\u8bf7\u6c42\uff0c\u5c01\u88c5\u8bf7\u6c42\u4f53</li> </ul>"},{"location":"changes/#version-004","title":"Version 0.0.4","text":"<p>Released 2023-04-05</p> <ul> <li>\u5c01\u88c5g\u53d8\u91cf\uff0c\u7528\u4e8e\u4e00\u4e2a\u8bf7\u6c42\u5468\u671f\u4e2d\u4f20\u9012\u6570\u636e</li> </ul>"},{"location":"changes/#version-003","title":"Version 0.0.3","text":"<p>Released 2023-04-04</p> <ul> <li>\u66f4\u65b0\u91cd\u5b9a\u5411\u529f\u80fd\uff1b</li> <li>\u4e3arequest\u6dfb\u52a0\u7c7b\u578b\u6ce8\u89e3\uff0c\u4f18\u5316\u7528\u6237\u4f7f\u7528\uff1b</li> <li>\u90e8\u5206\u7cfb\u7edf\u65b9\u6cd5\u79c1\u6709\u5316&amp;\u5c01\u88c5\u9632\u6b62\u7528\u6237\u8bef\u64cd\u4f5c</li> </ul>"},{"location":"changes/#version-002","title":"Version 0.0.2","text":"<p>Released 2023-04-04</p> <ul> <li>\u652f\u6301\u8bf7\u6c42\u5904\u7406\u94a9\u5b50</li> </ul>"},{"location":"changes/#version-001","title":"Version 0.0.1","text":"<p>Released 2023-04-04</p> <ul> <li>mini web frame</li> </ul>"},{"location":"installation/","title":"\u5b89\u88c5","text":""},{"location":"installation/#python-version","title":"Python Version","text":"<p>\u6211\u4eec\u63a8\u8350\u4f7f\u7528python3\uff0c\u6700\u597d\u5927\u4e8epython 3.8</p>"},{"location":"installation/#installation-bframe","title":"Installation bframe","text":"<pre><code>pip install bframe\n</code></pre>"},{"location":"quickstart/","title":"\u5feb\u901f\u5165\u95e8","text":""},{"location":"quickstart/#bframer","title":"bframer","text":"<p>\u5148\u770b\u8fd9\u4e2a\u7b80\u5355\u7684\u535a\u5ba2\u5427</p>"},{"location":"quickstart/#shorturl","title":"shortUrl","text":"<p>\u5148\u770b\u8fd9\u4e2a\u7b80\u5355\u7684\u77ed\u94fe\u63a5\u670d\u52a1\u5668\u5427</p>"},{"location":"tutorial/","title":"\u6559\u7a0b","text":""},{"location":"tutorial/#wsgi","title":"wsgi\u652f\u6301","text":"<p>\u82e5\u60a8\u9700\u8981\u4f7f\u7528wsgi\u529f\u80fd\u7684\u652f\u6301\uff0c\u4f7f\u7528<code>WSGIProxy</code>\u7c7b\u8fdb\u884c\u5305\u88c5\u5373\u53ef</p> <pre><code>from bframe import WSGIProxy\nfrom wsgiref.simple_server import make_server\nwith make_server('', 7256, WSGIProxy(app)) as httpd:\nprint(\"Serving on port 7256...\")\nhttpd.serve_forever()\n</code></pre>"},{"location":"tutorial/#_1","title":"\u6dfb\u52a0\u94a9\u5b50\u652f\u6301","text":"<p>\u5b9a\u4e49\u8bf7\u6c42\u94a9\u5b50 </p> <pre><code># \u5b9a\u4e49\u8bf7\u6c42\u94a9\u5b50\n@app.add_before_handle\ndef before_01():\nif request.Method == \"POST\":\nreturn \"disallow method\"\n</code></pre> <p>\u5b9a\u4e49\u54cd\u5e94\u94a9\u5b50 </p> <pre><code># \u5b9a\u4e49\u54cd\u5e94\u94a9\u5b50\n@app.add_after_handle\ndef after_01(resp: Response):\nprint(\"resp:\", resp.Code)\nreturn resp\n</code></pre> <p>\u81ea\u5b9a\u4e49\u9519\u8bef\u54cd\u5e94 </p> <pre><code># \u81ea\u5b9a\u4e49\u9519\u8bef\u54cd\u5e94\n@app.add_error_handle(401)\ndef err_401():\nreturn \"401 error\"\n</code></pre>"},{"location":"tutorial/#_2","title":"\u652f\u6301\u91cd\u5b9a\u5411","text":"<pre><code>from bframe import Redirect, request\n@app.get(\"/short_url\")\ndef short_url():\nreturn Redirect(request.args.get(\"returnUrl\"))\n</code></pre>"},{"location":"tutorial/#g","title":"\u652f\u6301g\u53d8\u91cf","text":"<pre><code>from bframe import Frame, g, request\napp = Frame(__name__)\n@app.add_before_handle\ndef before_01():\nusername = request.Headers.get(\"username\")\ng.username = username\n@app.get(\"/profile\")\ndef profile():\nreturn {\"username\": g.username}\n</code></pre>"},{"location":"tutorial/#_3","title":"\u89e3\u6790\u8bf7\u6c42\u4f53","text":"<pre><code>from bframe import request\n@app.route(\"/\", [\"get\", \"post\"])\ndef index():\nprint({\"args\": request.args,\n\"forms\": request.forms,\n\"files\": request.files,\n})\nreturn \"ok\"\n</code></pre>"},{"location":"tutorial/#_4","title":"\u652f\u6301\u8def\u5f84\u53c2\u6570\u5339\u914d(\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u3001\u6b63\u5219)","text":"<pre><code>@app.get(\"/api/&lt;reg:(?P&lt;version&gt;v\\d+$)&gt;/user/&lt;int:pk&gt;\")\ndef user_api(version, pk):\nreturn {\"api_version\": version, \"path_args\": pk}\n</code></pre>"},{"location":"tutorial/#_5","title":"\u652f\u6301\u9759\u6001\u6587\u4ef6","text":"<pre><code>app = Frame(__name__, static_url=\"static\", static_folder=\"static\")\n</code></pre>"},{"location":"tutorial/#py","title":"\u652f\u6301\u89e3\u6790py\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>app.Config.from_py(\"config\")\n</code></pre>"},{"location":"tutorial/#cookiesession","title":"\u652f\u6301cookie&amp;session\u64cd\u4f5c","text":"<pre><code>from bframe import Frame\nfrom bframe import make_response\nfrom bframe import session\napp = Frame(__name__)\n@app.get(\"/\")\ndef index():\nret = make_response(\"hello world\")\nsess[\"username\"] = \"tom\"\nret.set_cookies(\"x-username\", \"tom\", path=\"/\")\nreturn ret\n@app.get(\"/home\")\ndef home():\nusername = sess[\"username\"]\nif not username:\nreturn \"not login\"\nprint(request.Cookies.get(\"x-username\"))\nret = make_response(\"home\")\nreturn ret\nif __name__ == \"__main__\":\napp.run()\n</code></pre>"},{"location":"tutorial/#_6","title":"\u652f\u6301\u7c7b\u89c6\u56fe","text":"<pre><code>from bframe import MethodView\napp = Frame(__name__)\nclass BookView(MethodView):\ndef get(self):\nreturn books\ndef post(self):\nglobal books\nreq = request.forms\nreq['id'] = len(books) + 1\nbooks.append(req)\nreturn req\napp.add_route(\"/book\", BookView.as_view())\nif __name__ == \"__main__\":\napp.run()\n</code></pre>"},{"location":"tutorial/#_7","title":"\u652f\u6301\u901a\u7528\u7c7b\u89c6\u56fe&amp;\u9ed8\u8ba4\u8def\u7531","text":"<pre><code>from bframe.serizlizer import SimpleSerializer\nfrom sqlalchemy import create_engine, Column, Integer, String, Float\nfrom sqlalchemy.orm import sessionmaker\nfrom sqlalchemy.orm import declarative_base\nengine = create_engine('sqlite:///database.db', echo=True)\nBase = declarative_base()\nclass Phone(Base):\n__tablename__ = 'phones'\nid = Column(Integer, primary_key=True)\nname = Column(String)\nprice = Column(Float)\n# Base.metadata.create_all(engine)\nSession = sessionmaker(bind=engine)\nsession = Session()\nclass PhoneViewSet(ViewSet):\ndecorators = [prue_response_decorator]\ntable_class = Phone\ntable_serializer = SimpleSerializer\ndef get_session(self):\nreturn session\n# ================================\napp.add_route(\"/phone\", PhoneViewSet.as_view({\n\"get\": \"list\",\n\"post\": \"create\",\n}))\napp.add_route(\"/phone/&lt;int:pk&gt;\", PhoneViewSet.as_view({\n\"get\": \"retrieve\",\n\"post\": \"update\",\n\"put\": \"partial_update\",\n\"delete\": \"destroy\",\n}))\n# \u6216\u8005================================\nfrom bframe.generics import DefaultRouter\nrouter = DefaultRouter(app)\n# PhoneViewSet\nrouter.register(\"/phone\", PhoneViewSet)\nif __name__ == \"__main__\":\napp.run()\n</code></pre>"},{"location":"tutorial/#_8","title":"\u6846\u67b6\u9ed8\u8ba4\u914d\u7f6e","text":"<pre><code># session\u76f8\u5173\u7684\u9ed8\u8ba4\u914d\u7f6e\n\"SESSION_ID\": \"_session\"\n\"SESSION_MAX_AGE\": 604800  # a week\n\"SESSION_EXPIRES\": None\n\"SESSION_PATH\": \"/\"\n\"SESSION_DOMAIN\": None\n\"SESSION_SECURE\": False\n\"SESSION_HTTPONLY\": True\n\"SESSION_SAMESITE\": None\n\n# \u901a\u7528\u89c6\u56fe\u9ed8\u8ba4\u914d\u7f6e\n\"GENERIC_VIEW_DEFAULT_PRIMARY_KEY\": \"id\"                  # \u6570\u636e\u5e93\u4e3b\u952e\u540d\u79f0\n\"GENERIC_VIEW_DEFAULT_LIMIT\": 20                          # \u9ed8\u8ba4\u67e5\u8be2\u603b\u91cf\n\"GENERIC_VIEW_DEFAULT_LIMIT_KEY\": \"_limit\"                # \u9ed8\u8ba4\u67e5\u8be2\u603b\u91cfkey\n\"GENERIC_VIEW_DEFAULT_OFFSET\": 1                          # \u9ed8\u8ba4\u5206\u9875\u6570\n\"GENERIC_VIEW_DEFAULT_OFFSET_KEY\": \"_offset\"              # \u9ed8\u8ba4\u5206\u9875\u6570key\n\"GENERIC_VIEW_DEFAULT_ORDER_BY\": \"id\"                     # \u6570\u636e\u67e5\u8be2\u6392\u5e8f\u5b57\u6bb5\n\"GENERIC_VIEW_DEFAULT_ORDER_BY_KEY\": \"_order_by\"          # \u6570\u636e\u67e5\u8be2\u6392\u5e8f\u5b57\u6bb5key\n\"GENERIC_VIEW_DEFAULT_ORDER\": \"asc\"                       # \u6570\u636e\u67e5\u8be2\u6392\u5e8f\u5b57\u6bb5\u987a\u5e8f\n\"GENERIC_VIEW_DEFAULT_ORDER_KEY\": \"_order\"                # \u6570\u636e\u67e5\u8be2\u6392\u5e8f\u5b57\u6bb5\u987a\u5e8fkey\n</code></pre>"}]}