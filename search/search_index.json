{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"A simple python web server frame","text":"<p><code>Please do not use in a production environment!</code></p> <p><code>wranning</code>: same flask, not flask!</p>"},{"location":"#1","title":"1. \u5feb\u901f\u5b89\u88c5\u4f7f\u7528","text":"<pre><code>pip install bframe -i https://pypi.org/simple\n</code></pre> <p>or </p> <pre><code>git clone https://github.com/Bean-jun/bframe.git\npython setup.py install\n</code></pre>"},{"location":"#2","title":"2. \u5feb\u901f\u5165\u95e8","text":"<pre><code>from bframe import Frame\napp = Frame(__name__)\n@app.get(\"/\")\n@app.get(\"/index\")\ndef home():\nreturn \"hello world\"\nif __name__ == \"__main__\":\napp.run()\n</code></pre>"},{"location":"#3-wsgi","title":"3. wsgi\u652f\u6301","text":"<p>\u82e5\u60a8\u9700\u8981\u4f7f\u7528wsgi\u529f\u80fd\u7684\u652f\u6301\uff0c\u4f7f\u7528<code>WSGIProxy</code>\u7c7b\u8fdb\u884c\u5305\u88c5\u5373\u53ef</p> <pre><code>from bframe import WSGIProxy\nfrom wsgiref.simple_server import make_server\nwith make_server('', 7256, WSGIProxy(app)) as httpd:\nprint(\"Serving on port 7256...\")\nhttpd.serve_forever()\n</code></pre>"},{"location":"#4","title":"4. \u6dfb\u52a0\u94a9\u5b50\u652f\u6301","text":"<p>\u5b9a\u4e49\u8bf7\u6c42\u94a9\u5b50 </p> <pre><code># \u5b9a\u4e49\u8bf7\u6c42\u94a9\u5b50\n@app.add_before_handle\ndef before_01():\nif request.Method == \"POST\":\nreturn \"disallow method\"\n</code></pre> <p>\u5b9a\u4e49\u54cd\u5e94\u94a9\u5b50 </p> <pre><code># \u5b9a\u4e49\u54cd\u5e94\u94a9\u5b50\n@app.add_after_handle\ndef after_01(resp: Response):\nprint(\"resp:\", resp.Code)\nreturn resp\n</code></pre> <p>\u81ea\u5b9a\u4e49\u9519\u8bef\u54cd\u5e94 </p> <pre><code># \u81ea\u5b9a\u4e49\u9519\u8bef\u54cd\u5e94\n@app.add_error_handle(401)\ndef err_401():\nreturn \"401 error\"\n</code></pre>"},{"location":"#5","title":"5. \u652f\u6301\u91cd\u5b9a\u5411","text":"<pre><code>from bframe import Redirect, request\n@app.get(\"/short_url\")\ndef short_url():\nreturn Redirect(request.args.get(\"returnUrl\"))\n</code></pre>"},{"location":"#6-g","title":"6. \u652f\u6301g\u53d8\u91cf","text":"<pre><code>from bframe import Frame, g, request\napp = Frame(__name__)\n@app.add_before_handle\ndef before_01():\nusername = request.Headers.get(\"username\")\ng.username = username\n@app.get(\"/profile\")\ndef profile():\nreturn {\"username\": g.username}\n</code></pre>"},{"location":"#7","title":"7. \u89e3\u6790\u8bf7\u6c42\u4f53","text":"<pre><code>from bframe import request\n@app.route(\"/\", [\"get\", \"post\"])\ndef index():\nprint({\"args\": request.args,\n\"forms\": request.forms,\n\"files\": request.files,\n})\nreturn \"ok\"\n</code></pre>"},{"location":"#8","title":"8. \u652f\u6301\u8def\u5f84\u53c2\u6570\u5339\u914d(\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u3001\u6b63\u5219)","text":"<pre><code>@app.get(\"/api/&lt;reg:(?P&lt;version&gt;v\\d+$)&gt;/user/&lt;int:pk&gt;\")\ndef user_api(version, pk):\nreturn {\"api_version\": version, \"path_args\": pk}\n</code></pre>"},{"location":"#9","title":"9. \u652f\u6301\u9759\u6001\u6587\u4ef6","text":"<pre><code>app = Frame(__name__, static_url=\"static\", static_folder=\"static\")\n</code></pre>"},{"location":"#10-py","title":"10. \u652f\u6301\u89e3\u6790py\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>app.Config.from_py(\"config\")\n</code></pre>"},{"location":"#11","title":"11. \u6837\u4f8b\u53c2\u8003","text":"<p><code>main.py</code></p> <p>https://github.com/Bean-jun/Plats.git</p>"},{"location":"api/","title":"Reference","text":""}]}